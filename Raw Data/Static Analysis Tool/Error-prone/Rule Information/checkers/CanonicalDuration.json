{
  "name": "CanonicalDuration",
  "language": "java",
  "description": "Duration can be expressed more clearly with different units",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 278,
  "branches": 37,
  "apis": 8,
  "test": [
    {
      "description": "refactoringJavaTime",
      "expected-problems": null,
      "expected-linenumbers": [
        33
      ],
      "code": "package a;\n\n            import java.time.Duration;\n\n            public class A {\n              static final int CONST = 86400;\n\n              {\n                Duration.ofSeconds(86400);\n                java.time.Duration.ofSeconds(86400);\n                Duration.ofSeconds(CONST);\n                Duration.ofMillis(0);\n                Duration.ofMillis(4611686018427387904L);\n                Duration.ofDays(1);\n              }\n            }\n            \n\n            package a;\n\n            import java.time.Duration;\n\n            public class A {\n              static final int CONST = 86400;\n\n              {\n                Duration.ofDays(1);\n                java.time.Duration.ofDays(1);\n                Duration.ofSeconds(CONST);\n                Duration.ofMillis(0);\n                Duration.ofMillis(4611686018427387904L);\n                Duration.ofDays(1);\n              }\n            }"
    },
    {
      "description": "refactoringJoda",
      "expected-problems": null,
      "expected-linenumbers": [
        79
      ],
      "code": "package a;\n\n            import org.joda.time.Duration;\n\n            public class A {\n              static final int CONST = 86400;\n\n              {\n                Duration.standardSeconds(86400);\n                org.joda.time.Duration.standardSeconds(86400);\n                Duration.standardSeconds(CONST);\n                Duration zero = Duration.standardSeconds(0);\n                Duration.standardDays(1);\n              }\n            }\n            \n\n            package a;\n\n            import org.joda.time.Duration;\n\n            public class A {\n              static final int CONST = 86400;\n\n              {\n                Duration.standardDays(1);\n                org.joda.time.Duration.standardDays(1);\n                Duration.standardSeconds(CONST);\n                Duration zero = Duration.ZERO;\n                Duration.standardDays(1);\n              }\n            }"
    },
    {
      "description": "refactoringJavaTimeStaticImport",
      "expected-problems": null,
      "expected-linenumbers": [
        123
      ],
      "code": "package a;\n\n            import static java.time.Duration.ofSeconds;\n            import java.time.Duration;\n\n            public class A {\n              {\n                ofSeconds(86400);\n              }\n            }\n            \n\n            package a;\n\n            import static java.time.Duration.ofDays;\n            import static java.time.Duration.ofSeconds;\n\n            import java.time.Duration;\n\n            public class A {\n              {\n                ofDays(1);\n              }\n            }"
    },
    {
      "description": "refactoringJodaStaticImport",
      "expected-problems": null,
      "expected-linenumbers": [
        159
      ],
      "code": "package a;\n\n            import static org.joda.time.Duration.standardSeconds;\n\n            public class A {\n              {\n                standardSeconds(86400);\n                standardSeconds(0).getStandardSeconds();\n              }\n            }\n            \n\n            package a;\n\n            import static org.joda.time.Duration.standardDays;\n            import static org.joda.time.Duration.standardSeconds;\n\n            import org.joda.time.Duration;\n\n            public class A {\n              {\n                standardDays(1);\n                Duration.ZERO.getStandardSeconds();\n              }\n            }"
    },
    {
      "description": "ignoredMethod",
      "expected-problems": null,
      "expected-linenumbers": [
        196
      ],
      "code": "package a;\n\n            import java.time.Duration;\n\n            public class A {\n              static final int S = 60;\n              static final int M = 60;\n              static final int H = 24;\n\n              {\n                Duration.ofSeconds(S);\n                Duration.ofMinutes(H);\n                Duration.ofHours(24);\n              }\n            }"
    },
    {
      "description": "consistentWithinExpression",
      "expected-problems": null,
      "expected-linenumbers": [
        222
      ],
      "code": "package a;\n\n            import static java.time.Duration.ofSeconds;\n            import static java.util.Arrays.asList;\n            import java.time.Duration;\n            import java.util.List;\n\n            public class A {\n              // The 120 is left alone here because 121 can't be converted too.\n              static final List<Duration> negative = asList(ofSeconds(120), ofSeconds(121));\n\n              static final List<Duration> positive = asList(ofSeconds(120), ofSeconds(180));\n            }\n            \n\n            package a;\n\n            import static java.time.Duration.ofMinutes;\n            import static java.time.Duration.ofSeconds;\n            import static java.util.Arrays.asList;\n            import java.time.Duration;\n            import java.util.List;\n\n            public class A {\n              // The 120 is left alone here because 121 can't be converted too.\n              static final List<Duration> negative = asList(ofSeconds(120), ofSeconds(121));\n\n              static final List<Duration> positive = asList(ofMinutes(2), ofMinutes(3));\n            }"
    },
    {
      "description": "fixConstantExpressions",
      "expected-problems": null,
      "expected-linenumbers": [
        263
      ],
      "code": "package a;\n\n            import static java.time.Duration.ofSeconds;\n            import java.time.Duration;\n\n            public class A {\n              static final Duration positive = ofSeconds(2 * 60);\n            }\n            \n\n            package a;\n\n            import static java.time.Duration.ofMinutes;\n            import static java.time.Duration.ofSeconds;\n            import java.time.Duration;\n\n            public class A {\n              static final Duration positive = ofMinutes(2);\n            }"
    }
  ]
}