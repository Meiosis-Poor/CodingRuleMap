{
  "name": "ThreadLocalUsage",
  "language": "java",
  "description": "ThreadLocals should be stored in static fields",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 119,
  "branches": 15,
  "apis": 1,
  "test": [
    {
      "description": "positive",
      "expected-problems": null,
      "expected-linenumbers": [
        31
      ],
      "code": "class ThreadLocalUsage {\n              // BUG: Diagnostic contains:\n              ThreadLocal<Object> local = new ThreadLocal<>();\n\n              {\n                new ThreadLocal<>();\n                new ThreadLocal<Object>() {};\n              }\n            }"
    },
    {
      "description": "negative",
      "expected-problems": null,
      "expected-linenumbers": [
        50
      ],
      "code": "class Test {\n              static final ThreadLocal<Object> local = new ThreadLocal<>();\n            }"
    },
    {
      "description": "negativeWellKnownTypes",
      "expected-problems": null,
      "expected-linenumbers": [
        63
      ],
      "code": "import java.text.DateFormat;\n            import java.text.SimpleDateFormat;\n\n            class Test {\n              final ThreadLocal<Boolean> a = new ThreadLocal<>();\n              final ThreadLocal<Long> b = new ThreadLocal<>();\n              final ThreadLocal<DateFormat> c = new ThreadLocal<>();\n              final ThreadLocal<SimpleDateFormat> d = new ThreadLocal<>();\n            }"
    },
    {
      "description": "negativeSingleton",
      "expected-problems": null,
      "expected-linenumbers": [
        82
      ],
      "code": "@Singleton\n            class Test {\n              final ThreadLocal<Object> a = new ThreadLocal<>();\n            }"
    }
  ]
}