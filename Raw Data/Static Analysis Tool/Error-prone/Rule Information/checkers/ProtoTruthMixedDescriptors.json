{
  "name": "ProtoTruthMixedDescriptors",
  "language": "java",
  "description": "The arguments passed to `ignoringFields` are inconsistent with the proto which is the subject of the assertion.",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 124,
  "branches": 10,
  "apis": 1,
  "test": [
    {
      "description": "positive",
      "expected-problems": null,
      "expected-linenumbers": [
        36
      ],
      "code": "import static com.google.common.truth.extensions.proto.ProtoTruth.assertThat;\n            import com.google.errorprone.bugpatterns.proto.ProtoTest.TestFieldProtoMessage;\n            import com.google.errorprone.bugpatterns.proto.ProtoTest.TestProtoMessage;\n\n            final class Test {\n              void test() {\n                assertThat(TestFieldProtoMessage.getDefaultInstance())\n                    // BUG: Diagnostic contains:\n                    .ignoringFields(TestProtoMessage.MESSAGE_FIELD_NUMBER);\n              }\n            }"
    },
    {
      "description": "positive_wrongType",
      "expected-problems": null,
      "expected-linenumbers": [
        57
      ],
      "code": "import static com.google.common.truth.extensions.proto.ProtoTruth.assertThat;\nimport com.google.errorprone.bugpatterns.proto.ProtoTest.TestFieldProtoMessage;\nimport com.google.errorprone.bugpatterns.proto.ProtoTest.TestProtoMessage;\n\nfinal class Test {\n  void test() {\n    assertThat(TestFieldProtoMessage.getDefaultInstance())\n        // BUG: Diagnostic contains:\n        .ignoringFields(\n            TestProtoMessage.MULTI_FIELD_FIELD_NUMBER, TestProtoMessage.MESSAGE_FIELD_NUMBER);\n  }\n}"
    },
    {
      "description": "positive_fluentChain",
      "expected-problems": null,
      "expected-linenumbers": [
        79
      ],
      "code": "import static com.google.common.truth.extensions.proto.ProtoTruth.assertThat;\n            import com.google.errorprone.bugpatterns.proto.ProtoTest.TestFieldProtoMessage;\n            import com.google.errorprone.bugpatterns.proto.ProtoTest.TestProtoMessage;\n\n            final class Test {\n              void test() {\n                assertThat(TestFieldProtoMessage.getDefaultInstance())\n                    .ignoringFields(TestFieldProtoMessage.FIELD_FIELD_NUMBER)\n                    // BUG: Diagnostic contains:\n                    .ignoringFields(TestProtoMessage.MESSAGE_FIELD_NUMBER);\n              }\n            }"
    },
    {
      "description": "negative",
      "expected-problems": null,
      "expected-linenumbers": [
        101
      ],
      "code": "import static com.google.common.truth.extensions.proto.ProtoTruth.assertThat;\nimport com.google.errorprone.bugpatterns.proto.ProtoTest.TestFieldProtoMessage;\nimport com.google.errorprone.bugpatterns.proto.ProtoTest.TestProtoMessage;\nimport com.google.protobuf.Message;\n\nfinal class Test {\n  void test() {\n    assertThat(TestProtoMessage.getDefaultInstance())\n        .ignoringFields(\n            TestProtoMessage.MULTI_FIELD_FIELD_NUMBER, TestProtoMessage.MESSAGE_FIELD_NUMBER);\n    assertThat((Message) TestFieldProtoMessage.getDefaultInstance())\n        .ignoringFields(TestProtoMessage.MULTI_FIELD_FIELD_NUMBER);\n  }\n}"
    }
  ]
}