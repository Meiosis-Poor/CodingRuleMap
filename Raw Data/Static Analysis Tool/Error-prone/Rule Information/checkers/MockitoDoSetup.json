{
  "name": "MockitoDoSetup",
  "language": "java",
  "description": "Prefer using when/thenReturn over doReturn/when for additional type safety.",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 173,
  "branches": 19,
  "apis": 1,
  "test": [
    {
      "description": "happy",
      "expected-problems": null,
      "expected-linenumbers": [
        28
      ],
      "code": "import org.mockito.Mockito;\n\n            public class Test {\n              public int test(Test test) {\n                Mockito.doReturn(1).when(test).test(null);\n                return 1;\n              }\n            }\n            \n\n            import static org.mockito.Mockito.when;\n            import org.mockito.Mockito;\n\n            public class Test {\n              public int test(Test test) {\n                when(test.test(null)).thenReturn(1);\n                return 1;\n              }\n            }"
    },
    {
      "description": "ignoresSpiesCreatedByAnnotation",
      "expected-problems": null,
      "expected-linenumbers": [
        59
      ],
      "code": "import org.mockito.Mockito;\n\n            public class Test {\n              @org.mockito.Spy Test test;\n\n              public int test() {\n                Mockito.doReturn(1).when(test).test();\n                return 1;\n              }\n            }"
    },
    {
      "description": "ignoresSpiesCreatedByStaticMethod",
      "expected-problems": null,
      "expected-linenumbers": [
        80
      ],
      "code": "import org.mockito.Mockito;\n\n            public class Test {\n              Test test = Mockito.spy(Test.class);\n\n              public int test() {\n                Mockito.doReturn(1).when(test).test();\n                return 1;\n              }\n            }"
    },
    {
      "description": "ignoresMocksConfiguredToThrow_viaThenThrow",
      "expected-problems": null,
      "expected-linenumbers": [
        101
      ],
      "code": "import org.mockito.Mockito;\n\n            public class Test {\n              public int test(Test test) {\n                Mockito.doReturn(1).when(test).test(null);\n                Mockito.when(test.test(null)).thenThrow(new Exception());\n                return 1;\n              }\n            }"
    },
    {
      "description": "ignoresMocksConfiguredToThrow_viaDoThrow",
      "expected-problems": null,
      "expected-linenumbers": [
        121
      ],
      "code": "import org.mockito.Mockito;\n\n            public class Test {\n              public int test(Test test) {\n                Mockito.doReturn(1).when(test).test(null);\n                Mockito.doThrow(new Exception()).when(test).test(null);\n                return 1;\n              }\n            }"
    }
  ]
}