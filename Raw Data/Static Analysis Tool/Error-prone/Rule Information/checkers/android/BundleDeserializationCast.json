{
  "name": "BundleDeserializationCast",
  "language": "java",
  "description": "Object serialized in Bundle may have been flattened to base type.",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 123,
  "branches": 14,
  "apis": 1,
  "test": [
    {
      "description": "positiveCaseGetCustomList",
      "expected-problems": null,
      "expected-linenumbers": [
        38
      ],
      "code": "import android.os.Bundle;\n            import java.util.LinkedList;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                // BUG: Diagnostic matches: X\n                LinkedList myList = (LinkedList) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "positiveCaseGetCustomMap",
      "expected-problems": null,
      "expected-linenumbers": [
        63
      ],
      "code": "import android.os.Bundle;\n            import java.util.Hashtable;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                // BUG: Diagnostic matches: X\n                Hashtable myMap = (Hashtable) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetArrayList",
      "expected-problems": null,
      "expected-linenumbers": [
        88
      ],
      "code": "import android.os.Bundle;\n            import java.util.ArrayList;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                ArrayList<String> myList = (ArrayList<String>) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetHashMap",
      "expected-problems": null,
      "expected-linenumbers": [
        107
      ],
      "code": "import android.os.Bundle;\n            import java.util.HashMap;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                HashMap myMap = (HashMap) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetParcelableList",
      "expected-problems": null,
      "expected-linenumbers": [
        126
      ],
      "code": "import android.os.Bundle;\n            import java.util.List;\n            import com.google.errorprone.bugpatterns.android.testdata.CustomParcelableList;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                CustomParcelableList myList = (CustomParcelableList) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseNoCast",
      "expected-problems": null,
      "expected-linenumbers": [
        147
      ],
      "code": "import android.os.Bundle;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseOtherCast",
      "expected-problems": null,
      "expected-linenumbers": [
        165
      ],
      "code": "import android.os.Bundle;\n            import java.lang.Integer;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                Integer myObj = (Integer) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetList",
      "expected-problems": null,
      "expected-linenumbers": [
        184
      ],
      "code": "import android.os.Bundle;\n            import java.util.List;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                List myList = (List) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetMap",
      "expected-problems": null,
      "expected-linenumbers": [
        203
      ],
      "code": "import android.os.Bundle;\n            import java.util.Map;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                Map myMap = (Map) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetPrimitive",
      "expected-problems": null,
      "expected-linenumbers": [
        222
      ],
      "code": "import android.os.Bundle;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                int myInt = (int) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetPrimitiveArray",
      "expected-problems": null,
      "expected-linenumbers": [
        240
      ],
      "code": "import android.os.Bundle;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                int[] myArray = (int[]) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetReferenceArray",
      "expected-problems": null,
      "expected-linenumbers": [
        258
      ],
      "code": "import android.os.Bundle;\n            import java.util.TreeMap;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                TreeMap[] myArray = (TreeMap[]) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "positiveCaseGetCustomCharSequenceArray",
      "expected-problems": null,
      "expected-linenumbers": [
        277
      ],
      "code": "public class CustomCharSequence implements CharSequence {\n              @Override\n              public int length() {\n                return 0;\n              }\n\n              @Override\n              public char charAt(int index) {\n                return 0;\n              }\n\n              @Override\n              public CharSequence subSequence(int start, int end) {\n                return null;\n              }\n            }\n            \n\n            import android.os.Bundle;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                // BUG: Diagnostic matches: X\n                CustomCharSequence[] cs = (CustomCharSequence[]) bundle.getSerializable(\"key\");\n              }\n            }"
    },
    {
      "description": "negativeCaseGetStringArray",
      "expected-problems": null,
      "expected-linenumbers": [
        321
      ],
      "code": "import android.os.Bundle;\n\n            public class Test {\n              void test() {\n                Bundle bundle = new Bundle();\n                String[] myArray = (String[]) bundle.getSerializable(\"key\");\n              }\n            }"
    }
  ]
}