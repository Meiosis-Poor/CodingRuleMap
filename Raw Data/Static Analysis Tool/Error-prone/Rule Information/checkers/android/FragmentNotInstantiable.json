{
  "name": "FragmentNotInstantiable",
  "language": "java",
  "description": "Subclasses of Fragment must be instantiable via Class#newInstance(): the class must be public, static and have a public nullary constructor",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 113,
  "branches": 11,
  "apis": 3,
  "test": [
    {
      "description": "positiveCases",
      "expected-problems": null,
      "expected-linenumbers": [
        46
      ],
      "code": "package com.google.errorprone.bugpatterns.android.testdata;\n\n            import android.app.Fragment;\n\n            /**\n             * @author avenet@google.com (Arnaud J. Venet)\n             */\n            public class FragmentNotInstantiablePositiveCases {\n              // BUG: Diagnostic contains: public\n              static class PrivateFragment extends Fragment {\n                public PrivateFragment() {}\n              }\n\n              // BUG: Diagnostic contains: public\n              static class PrivateV4Fragment extends android.support.v4.app.Fragment {\n                public PrivateV4Fragment() {}\n              }\n\n              public static class PrivateConstructor extends Fragment {\n                // BUG: Diagnostic contains: public\n                PrivateConstructor() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructor extends Fragment {\n                public NoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructorV4 extends android.support.v4.app.Fragment {\n                public NoConstructorV4(int x) {}\n              }\n\n              public static class ParentFragment extends Fragment {\n                public ParentFragment() {}\n              }\n\n              public static class ParentFragmentV4 extends android.support.v4.app.Fragment {\n                public ParentFragmentV4() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructor extends ParentFragment {\n                public DerivedFragmentNoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructorV4 extends ParentFragmentV4 {\n                public DerivedFragmentNoConstructorV4(boolean b) {}\n              }\n\n              public class EnclosingClass {\n                // BUG: Diagnostic contains: static\n                public class InnerFragment extends Fragment {\n                  public InnerFragment() {}\n                }\n\n                public Fragment create1() {\n                  // BUG: Diagnostic contains: public\n                  return new Fragment() {};\n                }\n\n                public Fragment create2() {\n                  // BUG: Diagnostic contains: public\n                  class LocalFragment extends Fragment {}\n                  return new LocalFragment();\n                }\n              }\n            }\\"
    },
    {
      "description": "negativeCase",
      "expected-problems": null,
      "expected-linenumbers": [
        125
      ],
      "code": "package com.google.errorprone.bugpatterns.android.testdata;\n\n            import android.app.Fragment;\n\n            /**\n             * @author avenet@google.com (Arnaud J. Venet)\n             */\n            public class FragmentNotInstantiableNegativeCases {\n              public static class NotAFragment1 {\n                public NotAFragment1(int x) {}\n              }\n\n              public static class NotAFragment2 {\n                private NotAFragment2() {}\n              }\n\n              private static class NotAFragment3 {}\n\n              public class NotAFragment4 {}\n\n              private abstract class AbstractFragment extends Fragment {\n                public AbstractFragment(int x) {}\n              }\n\n              private abstract class AbstractV4Fragment extends android.support.v4.app.Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class MyFragment extends Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class DerivedFragment extends MyFragment {}\n\n              public static class MyV4Fragment extends android.support.v4.app.Fragment {}\n\n              public static class DerivedV4Fragment extends MyV4Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class MyFragment2 extends Fragment {\n                public MyFragment2() {}\n\n                public MyFragment2(int x) {}\n              }\n\n              public static class DerivedFragment2 extends MyFragment2 {\n                public DerivedFragment2() {}\n\n                public DerivedFragment2(boolean b) {}\n              }\n\n              public static class EnclosingClass {\n                public static class InnerFragment extends Fragment {\n                  public InnerFragment() {}\n                }\n              }\n\n              interface AnInterface {\n                public class ImplicitlyStaticInnerFragment extends Fragment {}\n\n                class ImplicitlyStaticAndPublicInnerFragment extends Fragment {}\n              }\n            }\\"
    },
    {
      "description": "positiveCases_custom",
      "expected-problems": null,
      "expected-linenumbers": [
        211
      ],
      "code": "package com.google.errorprone.bugpatterns.android.testdata;\n\n            import android.app.Fragment;\n\n            /**\n             * @author avenet@google.com (Arnaud J. Venet)\n             */\n            public class FragmentNotInstantiablePositiveCases {\n              // BUG: Diagnostic contains: public\n              static class PrivateFragment extends Fragment {\n                public PrivateFragment() {}\n              }\n\n              // BUG: Diagnostic contains: public\n              static class PrivateV4Fragment extends android.support.v4.app.Fragment {\n                public PrivateV4Fragment() {}\n              }\n\n              public static class PrivateConstructor extends Fragment {\n                // BUG: Diagnostic contains: public\n                PrivateConstructor() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructor extends Fragment {\n                public NoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructorV4 extends android.support.v4.app.Fragment {\n                public NoConstructorV4(int x) {}\n              }\n\n              public static class ParentFragment extends Fragment {\n                public ParentFragment() {}\n              }\n\n              public static class ParentFragmentV4 extends android.support.v4.app.Fragment {\n                public ParentFragmentV4() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructor extends ParentFragment {\n                public DerivedFragmentNoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructorV4 extends ParentFragmentV4 {\n                public DerivedFragmentNoConstructorV4(boolean b) {}\n              }\n\n              public class EnclosingClass {\n                // BUG: Diagnostic contains: static\n                public class InnerFragment extends Fragment {\n                  public InnerFragment() {}\n                }\n\n                public Fragment create1() {\n                  // BUG: Diagnostic contains: public\n                  return new Fragment() {};\n                }\n\n                public Fragment create2() {\n                  // BUG: Diagnostic contains: public\n                  class LocalFragment extends Fragment {}\n                  return new LocalFragment();\n                }\n              }\n            }\\\n            \n\n            package com.google.errorprone.bugpatterns.android.testdata;\n\n            /**\n             * @author jasonlong@google.com (Jason Long)\n             */\n            public class CustomFragment {}\\\n            \n\n            package com.google.errorprone.bugpatterns.android.testdata;\n\n            /**\n             * @author jasonlong@google.com (Jason Long)\n             */\n            public class CustomFragmentNotInstantiablePositiveCases {\n              // BUG: Diagnostic contains: public\n              static class PrivateFragment extends CustomFragment {\n                public PrivateFragment() {}\n              }\n\n              public static class PrivateConstructor extends CustomFragment {\n                // BUG: Diagnostic contains: public\n                PrivateConstructor() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructor extends CustomFragment {\n                public NoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class NoConstructorV4 extends android.support.v4.app.Fragment {\n                public NoConstructorV4(int x) {}\n              }\n\n              public static class ParentFragment extends CustomFragment {\n                public ParentFragment() {}\n              }\n\n              public static class ParentFragmentV4 extends android.support.v4.app.Fragment {\n                public ParentFragmentV4() {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructor extends ParentFragment {\n                public DerivedFragmentNoConstructor(int x) {}\n              }\n\n              // BUG: Diagnostic contains: nullary constructor\n              public static class DerivedFragmentNoConstructorV4 extends ParentFragmentV4 {\n                public DerivedFragmentNoConstructorV4(boolean b) {}\n              }\n\n              public class EnclosingClass {\n                // BUG: Diagnostic contains: static\n                public class InnerFragment extends CustomFragment {\n                  public InnerFragment() {}\n                }\n\n                public CustomFragment create1() {\n                  // BUG: Diagnostic contains: public\n                  return new CustomFragment() {};\n                }\n\n                public CustomFragment create2() {\n                  // BUG: Diagnostic contains: public\n                  class LocalFragment extends CustomFragment {}\n                  return new LocalFragment();\n                }\n              }\n            }\\"
    },
    {
      "description": "negativeCase_custom",
      "expected-problems": null,
      "expected-linenumbers": [
        366
      ],
      "code": "package com.google.errorprone.bugpatterns.android.testdata;\n\n            import android.app.Fragment;\n\n            /**\n             * @author avenet@google.com (Arnaud J. Venet)\n             */\n            public class FragmentNotInstantiableNegativeCases {\n              public static class NotAFragment1 {\n                public NotAFragment1(int x) {}\n              }\n\n              public static class NotAFragment2 {\n                private NotAFragment2() {}\n              }\n\n              private static class NotAFragment3 {}\n\n              public class NotAFragment4 {}\n\n              private abstract class AbstractFragment extends Fragment {\n                public AbstractFragment(int x) {}\n              }\n\n              private abstract class AbstractV4Fragment extends android.support.v4.app.Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class MyFragment extends Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class DerivedFragment extends MyFragment {}\n\n              public static class MyV4Fragment extends android.support.v4.app.Fragment {}\n\n              public static class DerivedV4Fragment extends MyV4Fragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class MyFragment2 extends Fragment {\n                public MyFragment2() {}\n\n                public MyFragment2(int x) {}\n              }\n\n              public static class DerivedFragment2 extends MyFragment2 {\n                public DerivedFragment2() {}\n\n                public DerivedFragment2(boolean b) {}\n              }\n\n              public static class EnclosingClass {\n                public static class InnerFragment extends Fragment {\n                  public InnerFragment() {}\n                }\n              }\n\n              interface AnInterface {\n                public class ImplicitlyStaticInnerFragment extends Fragment {}\n\n                class ImplicitlyStaticAndPublicInnerFragment extends Fragment {}\n              }\n            }\\\n            \n\n            package com.google.errorprone.bugpatterns.android.testdata;\n\n            /**\n             * @author jasonlong@google.com (Jason Long)\n             */\n            public class CustomFragment {}\\\n            \n\n            package com.google.errorprone.bugpatterns.android.testdata;\n\n            /**\n             * @author jasonlong@google.com (Jason Long)\n             */\n            public class CustomFragmentNotInstantiableNegativeCases {\n              public static class NotAFragment1 {\n                public NotAFragment1(int x) {}\n              }\n\n              public static class NotAFragment2 {\n                private NotAFragment2() {}\n              }\n\n              private static class NotAFragment3 {}\n\n              public class NotAFragment4 {}\n\n              private abstract class AbstractFragment extends CustomFragment {\n                public AbstractFragment(int x) {}\n              }\n\n              public static class MyFragment extends CustomFragment {\n                private int a;\n\n                public int value() {\n                  return a;\n                }\n              }\n\n              public static class DerivedFragment extends MyFragment {}\n\n              public static class MyFragment2 extends CustomFragment {\n                public MyFragment2() {}\n\n                public MyFragment2(int x) {}\n              }\n\n              public static class DerivedFragment2 extends MyFragment2 {\n                public DerivedFragment2() {}\n\n                public DerivedFragment2(boolean b) {}\n              }\n\n              public static class EnclosingClass {\n                public static class InnerFragment extends CustomFragment {\n                  public InnerFragment() {}\n                }\n              }\n\n              interface AnInterface {\n                public class ImplicitlyStaticInnerFragment extends CustomFragment {}\n\n                class ImplicitlyStaticAndPublicInnerFragment extends CustomFragment {}\n              }\n            }\\"
    }
  ]
}