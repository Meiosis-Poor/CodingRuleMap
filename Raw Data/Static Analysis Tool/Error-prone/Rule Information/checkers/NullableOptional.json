{
  "name": "NullableOptional",
  "language": "java",
  "description": "Using an Optional variable which is expected to possibly be null is discouraged. It is best to indicate the absence of the value by assigning it an empty optional.",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 74,
  "branches": 5,
  "apis": 1,
  "test": [
    {
      "description": "optionalFieldWithNullableAnnotation_showsError",
      "expected-problems": null,
      "expected-linenumbers": [
        30
      ],
      "code": "import java.util.Optional;\n            import javax.annotation.Nullable;\n\n            final class Test {\n              // BUG: Diagnostic contains:\n              @Nullable private Optional<Object> foo;\n            }"
    },
    {
      "description": "guavaOptionalFieldWithNullableAnnotation_showsError",
      "expected-problems": null,
      "expected-linenumbers": [
        47
      ],
      "code": "import com.google.common.base.Optional;\n            import javax.annotation.Nullable;\n\n            final class Test {\n              @Nullable\n              // BUG: Diagnostic contains:\n              private Optional<Object> foo;\n            }"
    },
    {
      "description": "methodReturnsOptionalWithNullableAnnotation_showsError",
      "expected-problems": null,
      "expected-linenumbers": [
        65
      ],
      "code": "import java.util.Optional;\n            import javax.annotation.Nullable;\n\n            final class Test {\n              @Nullable\n              // BUG: Diagnostic contains:\n              private Optional<Object> foo() {\n                return Optional.empty();\n              }\n            }"
    },
    {
      "description": "methodReturnsOptionalWithAnotherNullableAnnotation_showsError",
      "expected-problems": null,
      "expected-linenumbers": [
        85
      ],
      "code": "import java.util.Optional;\n            import org.jspecify.annotations.Nullable;\n\n            final class Test {\n              @Nullable\n              // BUG: Diagnostic contains:\n              private Optional<Object> foo() {\n                return Optional.empty();\n              }\n            }"
    },
    {
      "description": "methodHasNullableOptionalAsParameter_showsError",
      "expected-problems": null,
      "expected-linenumbers": [
        105
      ],
      "code": "import java.util.Optional;\n            import javax.annotation.Nullable;\n\n            final class Test {\n              // BUG: Diagnostic contains:\n              private void foo(@Nullable Optional<Object> optional) {}\n            }"
    },
    {
      "description": "objectFieldWithNullableAnnotation_noError",
      "expected-problems": null,
      "expected-linenumbers": [
        122
      ],
      "code": "import javax.annotation.Nullable;\n\n            final class Test {\n              @Nullable Object field;\n            }"
    },
    {
      "description": "methodReturnsNonOptionalWithNullableAnnotation_noError",
      "expected-problems": null,
      "expected-linenumbers": [
        137
      ],
      "code": "import javax.annotation.Nullable;\n\n            final class Test {\n              @Nullable\n              private Object foo() {\n                return null;\n              }\n            }"
    },
    {
      "description": "methodReturnsNonOptionalWithAnotherNullableAnnotation_noError",
      "expected-problems": null,
      "expected-linenumbers": [
        155
      ],
      "code": "import org.jspecify.annotations.Nullable;\n\n            final class Test {\n              @Nullable\n              private Object foo() {\n                return null;\n              }\n            }"
    },
    {
      "description": "methodHasNullableNonOptionalAsParameter_noError",
      "expected-problems": null,
      "expected-linenumbers": [
        173
      ],
      "code": "import org.jspecify.annotations.Nullable;\n\n            final class Test {\n              private void foo(@Nullable Object object) {}\n            }"
    }
  ]
}