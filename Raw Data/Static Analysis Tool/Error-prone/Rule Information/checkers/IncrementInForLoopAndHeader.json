{
  "name": "IncrementInForLoopAndHeader",
  "language": "java",
  "description": "This for loop increments the same variable in the header and in the body",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 79,
  "branches": 9,
  "apis": 1,
  "test": [
    {
      "description": "positiveCases",
      "expected-problems": null,
      "expected-linenumbers": [
        31
      ],
      "code": "package com.google.errorprone.bugpatterns.testdata;\n\n            /**\n             * @author mariasam@google.com (Maria Sam)\n             */\n            public class IncrementInForLoopAndHeaderPositiveCases {\n\n              public void basicTest() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) {\n                  i++;\n                }\n              }\n\n              public void decrement() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) {\n                  i--;\n                }\n              }\n\n              public void preInc() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) {\n                  --i;\n                }\n              }\n\n              public void multipleStatements() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) {\n                  --i;\n                  int a = 0;\n                }\n              }\n\n              public void multipleUpdates() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0, a = 1; i < 10; i++, a++) {\n                  a++;\n                }\n              }\n\n              public void multipleUpdatesOtherVar() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0, a = 1; i < 10; i++, a++) {\n                  i++;\n                }\n              }\n\n              public void multipleUpdatesBothVars() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0, a = 1; i < 10; i++, a++) {\n                  a++;\n                  i++;\n                }\n              }\n\n              public void nestedFor() {\n                for (int i = 0; i < 10; i++) {\n                  // BUG: Diagnostic contains: increment\n                  for (int a = 0; a < 10; a++) {\n                    a--;\n                  }\n                }\n              }\n\n              public void nestedForBoth() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) {\n                  i++;\n                  // BUG: Diagnostic contains: increment\n                  for (int a = 0; a < 10; a++) {\n                    a--;\n                  }\n                }\n              }\n\n              public void expressionStatement() {\n                // BUG: Diagnostic contains: increment\n                for (int i = 0; i < 10; i++) i++;\n              }\n            }\\"
    },
    {
      "description": "negativeCases",
      "expected-problems": null,
      "expected-linenumbers": [
        124
      ],
      "code": "package com.google.errorprone.bugpatterns.testdata;\n\n            import java.util.List;\n\n            /** Created by mariasam on 7/20/17. */\n            public class IncrementInForLoopAndHeaderNegativeCases {\n\n              public void arrayInc() {\n                for (int[] level = {}; level[0] > 10; level[0]--) {\n                  System.out.println(\"test\");\n                }\n              }\n\n              public void emptyForLoop() {\n                for (int i = 0; i < 2; i++) {}\n              }\n\n              public void inIf() {\n                for (int i = 0; i < 20; i++) {\n                  if (i == 7) {\n                    i++;\n                  }\n                }\n              }\n\n              public void inWhile() {\n                for (int i = 0; i < 20; i++) {\n                  while (i == 7) {\n                    i++;\n                  }\n                }\n              }\n\n              public void inDoWhile() {\n                for (int i = 0; i < 20; i++) {\n                  do {\n                    i++;\n                  } while (i == 7);\n                }\n              }\n\n              public void inFor() {\n                for (int i = 0; i < 20; i++) {\n                  for (int a = 0; a < i; a++) {\n                    i++;\n                  }\n                }\n              }\n\n              public void inForEach(List<String> list) {\n                for (int i = 0; i < 10; i++) {\n                  for (String s : list) {\n                    i++;\n                  }\n                }\n              }\n\n              public void otherVarInc() {\n                for (int i = 0; i < 2; i++) {\n                  int a = 0;\n                  a++;\n                }\n              }\n            }\\"
    }
  ]
}