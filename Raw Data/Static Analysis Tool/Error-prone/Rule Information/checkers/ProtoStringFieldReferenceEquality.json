{
  "name": "ProtoStringFieldReferenceEquality",
  "language": "java",
  "description": "Comparing protobuf fields of type String using reference equality",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 65,
  "branches": 5,
  "apis": 1,
  "test": [
    {
      "description": "positive",
      "expected-problems": null,
      "expected-linenumbers": [
        31
      ],
      "code": "package com.google.protobuf;\n\n            public class GeneratedMessage {}\n            \n\n            public abstract class Proto extends com.google.protobuf.GeneratedMessage {\n              public abstract String getMessage();\n            }\n            \n\n            class Test {\n              boolean g(Proto proto) {\n                boolean r = false;\n                // BUG: Diagnostic contains: proto.getMessage().equals(\"\")\n                r |= proto.getMessage() == \"\";\n                // BUG: Diagnostic contains: \"\".equals(proto.getMessage())\n                r |= \"\" == proto.getMessage();\n                // BUG: Diagnostic contains: !proto.getMessage().equals(\"\")\n                r |= proto.getMessage() != \"\";\n                return r;\n              }\n            }"
    },
    {
      "description": "negative",
      "expected-problems": null,
      "expected-linenumbers": [
        67
      ],
      "code": "package com.google.protobuf;\n\n            public class GeneratedMessage {}\n            \n\n            public abstract class Proto extends com.google.protobuf.GeneratedMessage {\n              public abstract int getId();\n\n              public abstract String getMessage();\n            }\n            \n\n            class Test {\n              boolean g(Proto proto) {\n                boolean r = false;\n                r |= proto.getId() == 0;\n                r |= proto.getMessage() == null;\n                return r;\n              }\n            }"
    }
  ]
}