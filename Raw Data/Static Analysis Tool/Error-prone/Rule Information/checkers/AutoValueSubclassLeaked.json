{
  "name": "AutoValueSubclassLeaked",
  "language": "java",
  "description": "Do not refer to the autogenerated AutoValue_ class outside the file containing the corresponding @AutoValue base class.",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "java",
  "loc": 122,
  "branches": 8,
  "apis": 1,
  "test": [
    {
      "description": "positive",
      "expected-problems": null,
      "expected-linenumbers": [
        33
      ],
      "code": "package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              @AutoValue\n              abstract static class Foo {\n                abstract int foo();\n              }\n            }\n            \n\n            package test;\n\n            class Bar {\n              public static Test.Foo create(int i) {\n                // BUG: Diagnostic contains:\n                return new AutoValue_Test_Foo(i);\n              }\n            }"
    },
    {
      "description": "negativeBuilder",
      "expected-problems": null,
      "expected-linenumbers": [
        65
      ],
      "code": "package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              @AutoValue\n              abstract static class Foo {\n                abstract int foo();\n\n                @AutoValue.Builder\n                abstract static class Builder {\n                  abstract Builder setFoo(int i);\n\n                  abstract Foo build();\n                }\n\n                public static Builder builder() {\n                  return new AutoValue_Test_Foo.Builder();\n                }\n              }\n            }"
    },
    {
      "description": "negative",
      "expected-problems": null,
      "expected-linenumbers": [
        96
      ],
      "code": "package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              @AutoValue\n              abstract static class Foo {\n                abstract int foo();\n\n                public static Foo create(int i) {\n                  return new AutoValue_Test_Foo(i);\n                }\n              }\n            }"
    },
    {
      "description": "generatedCode",
      "expected-problems": null,
      "expected-linenumbers": [
        120
      ],
      "code": "package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              @AutoValue\n              abstract static class Foo {\n                abstract int foo();\n              }\n            }\n            \n\n            package test;\n\n            import javax.annotation.processing.Generated;\n\n            @Generated(\"generator\")\n            class Bar {\n              public static Test.Foo create(int i) {\n                return new AutoValue_Test_Foo(i);\n              }\n            }"
    },
    {
      "description": "positiveAutoValueExtension",
      "expected-problems": null,
      "expected-linenumbers": [
        154
      ],
      "code": "package test;\n\n            class $$AutoValue_Foo extends Test.Foo {}\n            \n\n            package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              @AutoValue\n              abstract static class Foo {}\n            }\n            \n\n            package test;\n\n            class Bar {\n              public static Test.Foo create() {\n                // BUG: Diagnostic contains:\n                return new $$AutoValue_Foo();\n              }\n            }"
    },
    {
      "description": "positiveAutoValueExtension_noGeneratedAnnotation",
      "expected-problems": null,
      "expected-linenumbers": [
        191
      ],
      "code": "package test;\n\n            final class AutoValue_Test_Foo extends $AutoValue_Test_Foo {\n              static final Test.Foo AUTO_VALUE = new AutoValue_Test_Foo();\n            }\n            \n\n            package test;\n\n            import javax.annotation.processing.Generated;\n\n            @Generated(\"com.google.auto.value.processor.AutoValueProcessor\")\n            class $AutoValue_Test_Foo extends Test.Foo {}\n            \n\n            package test;\n\n            import com.google.auto.value.AutoValue;\n\n            class Test {\n              static final Test.Foo EXTENSION = new $AutoValue_Test_Foo();\n              static final Test.Foo AUTO_VALUE = new AutoValue_Test_Foo();\n\n              @AutoValue\n              abstract static class Foo {}\n            }\n            \n\n            package test;\n\n            class Bar {\n              // BUG: Diagnostic contains:\n              static final Test.Foo EXTENSION = new $AutoValue_Test_Foo();\n              // BUG: Diagnostic contains:\n              static final Test.Foo AUTO_VALUE = new AutoValue_Test_Foo();\n            }"
    }
  ]
}