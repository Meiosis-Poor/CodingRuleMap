{
  "name": "NonPrivateMemberVariablesInClasses",
  "language": "cpp",
  "description": ".. title:: clang-tidy - misc-non-private-member-variables-in-classes",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "cpp",
  "loc": 93,
  "branches": 2,
  "apis": 57,
  "test": [
    {
      "description": null,
      "expected-problems": 31,
      "expected-linenumbers": [
        122,
        125,
        128,
        140,
        143,
        154,
        158,
        161,
        172,
        175,
        186,
        189,
        193,
        203,
        207,
        218,
        221,
        224,
        235,
        238,
        286,
        291,
        306,
        321,
        330,
        341,
        375,
        380,
        385,
        390,
        395
      ],
      "code": "\n// RUN: %check_clang_tidy -check-suffixes=PUBLIC,NONPRIVATE,PROTECTED %s misc-non-private-member-variables-in-classes %t\n// RUN: %check_clang_tidy -check-suffixes=PUBLIC,NONPRIVATE,PROTECTED %s misc-non-private-member-variables-in-classes %t -- -config='{CheckOptions: {misc-non-private-member-variables-in-classes.IgnorePublicMemberVariables: false, misc-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesBeingPublic: false}}' --\n// RUN: %check_clang_tidy -check-suffixes=PUBLIC,PROTECTED %s misc-non-private-member-variables-in-classes %t -- -config='{CheckOptions: {misc-non-private-member-variables-in-classes.IgnorePublicMemberVariables: false, misc-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesBeingPublic: true}}' --\n// RUN: %check_clang_tidy -check-suffixes=PUBLIC,PROTECTED %s cppcoreguidelines-non-private-member-variables-in-classes %t -- --\n// RUN: %check_clang_tidy -check-suffixes=PROTECTED %s misc-non-private-member-variables-in-classes %t -- -config='{CheckOptions: {misc-non-private-member-variables-in-classes.IgnorePublicMemberVariables: true, misc-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesBeingPublic: false}}' --\n// RUN: %check_clang_tidy -check-suffixes=PROTECTED %s misc-non-private-member-variables-in-classes %t -- -config='{CheckOptions: {misc-non-private-member-variables-in-classes.IgnorePublicMemberVariables: true, misc-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesBeingPublic: true}}' --\n\n//----------------------------------------------------------------------------//\n\n// Only data, do not warn\n\nstruct S0 {\n  int S0_v0;\n\npublic:\n  int S0_v1;\n\nprotected:\n  int S0_v2;\n\nprivate:\n  int S0_v3;\n};\n\nclass S1 {\n  int S1_v0;\n\npublic:\n  int S1_v1;\n\nprotected:\n  int S1_v2;\n\nprivate:\n  int S1_v3;\n};\n\n// Only data and implicit or static methods, do not warn\n\nclass C {\npublic:\n  C() {}\n  ~C() {}\n};\n\nstruct S1Implicit {\n  C S1Implicit_v0;\n};\n\nstruct S1ImplicitAndStatic {\n  C S1Implicit_v0;\n  static void s() {}\n};\n\n//----------------------------------------------------------------------------//\n\n// All functions are static, do not warn.\n\nstruct S2 {\n  static void S2_m0();\n  int S2_v0;\n\npublic:\n  static void S2_m1();\n  int S2_v1;\n\nprotected:\n  static void S2_m3();\n  int S2_v2;\n\nprivate:\n  static void S2_m4();\n  int S2_v3;\n};\n\nclass S3 {\n  static void S3_m0();\n  int S3_v0;\n\npublic:\n  static void S3_m1();\n  int S3_v1;\n\nprotected:\n  static void S3_m3();\n  int S3_v2;\n\nprivate:\n  static void S3_m4();\n  int S3_v3;\n};\n\n//============================================================================//\n\n// union != struct/class. do not diagnose.\n\nunion U0 {\n  void U0_m0();\n  int U0_v0;\n\npublic:\n  void U0_m1();\n  int U0_v1;\n\nprotected:\n  void U0_m2();\n  int U0_v2;\n\nprivate:\n  void U0_m3();\n  int U0_v3;\n};\n\n//============================================================================//\n\n// Has non-static method with default visibility.\n\nstruct S4 {\n  void S4_m0();\n\n  int S4_v0;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S4_v0' has public visibility\npublic:\n  int S4_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S4_v1' has public visibility\nprotected:\n  int S4_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S4_v2' has protected visibility\nprivate:\n  int S4_v3;\n};\n\nclass S5 {\n  void S5_m0();\n\n  int S5_v0;\n\npublic:\n  int S5_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S5_v1' has public visibility\nprotected:\n  int S5_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S5_v2' has protected visibility\nprivate:\n  int S5_v3;\n};\n\n//----------------------------------------------------------------------------//\n\n// Has non-static method with public visibility.\n\nstruct S6 {\n  int S6_v0;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S6_v0' has public visibility\npublic:\n  void S6_m0();\n  int S6_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S6_v1' has public visibility\nprotected:\n  int S6_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S6_v2' has protected visibility\nprivate:\n  int S6_v3;\n};\n\nclass S7 {\n  int S7_v0;\n\npublic:\n  void S7_m0();\n  int S7_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S7_v1' has public visibility\nprotected:\n  int S7_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S7_v2' has protected visibility\nprivate:\n  int S7_v3;\n};\n\n//----------------------------------------------------------------------------//\n\n// Has non-static method with protected visibility.\n\nstruct S8 {\n  int S8_v0;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S8_v0' has public visibility\npublic:\n  int S8_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S8_v1' has public visibility\nprotected:\n  void S8_m0();\n  int S8_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S8_v2' has protected visibility\nprivate:\n  int S8_v3;\n};\n\nclass S9 {\n  int S9_v0;\n\npublic:\n  int S9_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S9_v1' has public visibility\nprotected:\n  void S9_m0();\n  int S9_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S9_v2' has protected visibility\nprivate:\n  int S9_v3;\n};\n\n//----------------------------------------------------------------------------//\n\n// Has non-static method with private visibility.\n\nstruct S10 {\n  int S10_v0;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S10_v0' has public visibility\npublic:\n  int S10_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S10_v1' has public visibility\nprotected:\n  int S10_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S10_v2' has protected visibility\nprivate:\n  void S10_m0();\n  int S10_v3;\n};\n\nclass S11 {\n  int S11_v0;\n\npublic:\n  int S11_v1;\n  // CHECK-MESSAGES-PUBLIC: :[[@LINE-1]]:7: warning: member variable 'S11_v1' has public visibility\nprotected:\n  int S11_v2;\n  // CHECK-MESSAGES-PROTECTED: :[[@LINE-1]]:7: warning: member variable 'S11_v2' has protected visibility\nprivate:\n  void S11_m0();\n  int S11_v3;\n};\n\n//============================================================================//\n\n// Static variables are ignored.\n// Has non-static methods and static variables.\n\nstruct S12 {\n  void S12_m0();\n  static int S12_v0;\n\npublic:\n  void S12_m1();\n  static int S12_v1;\n\nprotected:\n  void S12_m2();\n  static int S12_v2;\n\nprivate:\n  void S12_m3();\n  static int S12_v3;\n};\n\nclass S13 {\n  void S13_m0();\n  static int S13_v0;\n\npublic:\n  void S13_m1();\n  static int S13_v1;\n\nprotected:\n  void S13_m2();\n  static int S13_v2;\n\nprivate:\n  void S13_m3();\n  static int S13_v3;\n};\n\nstruct S14 {\n  void S14_m0();\n  int S14_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S14_v0' has public visibility\n\npublic:\n  void S14_m1();\n  int S14_v1;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S14_v1' has public visibility\n\nprotected:\n  void S14_m2();\n\nprivate:\n  void S14_m3();\n};\n\nclass S15 {\n  void S15_m0();\n\npublic:\n  void S15_m1();\n  int S15_v1;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S15_v1' has public visibility\n\nprotected:\n  void S15_m2();\n\nprivate:\n  void S15_m3();\n};\n\n//----------------------------------------------------------------------------//\n\ntemplate <typename T>\nstruct S97 {\n  void method();\n  T S97_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:5: warning: member variable 'S97_v0' has public visibility\n};\n\ntemplate struct S97<char *>;\n\ntemplate <>\nstruct S97<double> {\n  void method();\n  double S97d_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:10: warning: member variable 'S97d_v0' has public visibility\n};\n\n//----------------------------------------------------------------------------//\n\n#define FIELD(x) int x;\n\n// Do diagnose fields originating from macros.\nstruct S98 {\n  void method();\n  FIELD(S98_v0);\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:9: warning: member variable 'S98_v0' has public visibility\n};\n\n//----------------------------------------------------------------------------//\n\n// Don't look in descendant classes.\nclass S99 {\n  void method();\n\n  struct S99_0 {\n    int S99_S0_v0;\n  };\n\npublic:\n  struct S99_1 {\n    int S99_S0_v0;\n  };\n\nprotected:\n  struct S99_2 {\n    int S99_S0_v0;\n  };\n\nprivate:\n  struct S99_3 {\n    int S99_S0_v0;\n  };\n};\n\n//----------------------------------------------------------------------------//\n\n// Only diagnose once, don't let the inheritance fool you.\nstruct S100 {\n  int S100_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S100_v0' has public visibility\n  void m0();\n};\nstruct S101_default_inheritance : S100 {\n  int S101_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S101_v0' has public visibility\n  void m1();\n};\nstruct S102_public_inheritance : public S100 {\n  int S102_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S102_v0' has public visibility\n  void m1();\n};\nstruct S103_protected_inheritance : protected S100 {\n  int S103_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S103_v0' has public visibility\n  void m1();\n};\nstruct S104_private_inheritance : private S100 {\n  int S104_v0;\n  // CHECK-MESSAGES-NONPRIVATE: :[[@LINE-1]]:7: warning: member variable 'S104_v0' has public visibility\n  void m1();\n};"
    }
  ]
}