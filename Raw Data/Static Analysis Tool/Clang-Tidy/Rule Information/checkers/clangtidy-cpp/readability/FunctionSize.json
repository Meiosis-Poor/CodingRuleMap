{
  "name": "FunctionSize",
  "language": "cpp",
  "description": ".. title:: clang-tidy - readability-function-size",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "cpp",
  "loc": 241,
  "branches": 25,
  "apis": 118,
  "test": [
    {
      "description": null,
      "expected-problems": 138,
      "expected-linenumbers": [
        27,
        28,
        34,
        35,
        36,
        40,
        41,
        42,
        43,
        48,
        49,
        50,
        51,
        56,
        57,
        58,
        61,
        62,
        63,
        69,
        70,
        71,
        72,
        75,
        76,
        78,
        79,
        84,
        85,
        86,
        91,
        103,
        108,
        109,
        110,
        115,
        116,
        117,
        118,
        119,
        120,
        126,
        132,
        138,
        143,
        144,
        145,
        146,
        151,
        154,
        164,
        170,
        171,
        172,
        176,
        177,
        178,
        182,
        183,
        184,
        188,
        189,
        190,
        195,
        196,
        197,
        198,
        202,
        203,
        204,
        205,
        211,
        212,
        213,
        214,
        215,
        221,
        222,
        223,
        224,
        225,
        232,
        233,
        234,
        235,
        236,
        245,
        246,
        247,
        248,
        249,
        250,
        251,
        252,
        260,
        261,
        262,
        263,
        271,
        272,
        273,
        274,
        275,
        281,
        282,
        283,
        284,
        293,
        294,
        295,
        296,
        301,
        302,
        303,
        309,
        310,
        311,
        312,
        318,
        319,
        320,
        321,
        328,
        329,
        339,
        340,
        341,
        346,
        347,
        355,
        356,
        367,
        368,
        369,
        375,
        376,
        377,
        378
      ],
      "code": "\n// RUN: %check_clang_tidy %s readability-function-size %t -- \\\n// RUN:     -config='{CheckOptions: { \\\n// RUN:         readability-function-size.LineThreshold: 0, \\\n// RUN:         readability-function-size.StatementThreshold: 0, \\\n// RUN:         readability-function-size.BranchThreshold: 0, \\\n// RUN:         readability-function-size.ParameterThreshold: 5, \\\n// RUN:         readability-function-size.NestingThreshold: 2, \\\n// RUN:         readability-function-size.VariableThreshold: 1 \\\n// RUN:     }}'\n\n\n// RUN: %check_clang_tidy -check-suffixes=OPTIONAL %s readability-function-size %t -- \\\n// RUN:     -config='{CheckOptions: { \\\n// RUN:         readability-function-size.StatementThreshold: \"-1\", \\\n// RUN:         readability-function-size.BranchThreshold: \"5\", \\\n// RUN:         readability-function-size.ParameterThreshold: \"none\", \\\n// RUN:         readability-function-size.NestingThreshold: \"\", \\\n// RUN:         readability-function-size.VariableThreshold: \"\" \\\n// RUN:     }}'\n\n// Bad formatting is intentional, don't run clang-format over the whole file!\n\nvoid foo1() {\n}\n\nvoid foo2() {;}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'foo2' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-2]]:6: note: 1 statements (threshold 0)\n\nvoid foo3() {\n;\n\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'foo3' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 1 statements (threshold 0)\n\nvoid foo4(int i) { if (i) {} else; {}\n}\n// CHECK-MESSAGES: :[[@LINE-2]]:6: warning: function 'foo4' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-3]]:6: note: 1 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 3 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 branches (threshold 0)\n\nvoid foo5(int i) {for(;i;)while(i)\ndo;while(i);\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'foo5' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 7 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 3 branches (threshold 0)\n\ntemplate <typename T> T foo6(T i) {return i;\n}\nint x = foo6(0);\n// CHECK-MESSAGES: :[[@LINE-3]]:25: warning: function 'foo6' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-4]]:25: note: 1 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:25: note: 1 statements (threshold 0)\n\nvoid foo7(int p1, int p2, int p3, int p4, int p5, int p6) {;}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'foo7' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-2]]:6: note: 1 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-3]]:6: note: 6 parameters (threshold 5)\n\nvoid bar1() { [](){;;;;;;;;;;;if(1){}}();\n\n\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'bar1' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 14 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 1 branches (threshold 0)\n\nvoid bar2() { class A { void barx() {;;} }; }\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'bar2' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-2]]:6: note: 3 statements (threshold 0)\n//\n// CHECK-MESSAGES: :[[@LINE-4]]:30: warning: function 'barx' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-5]]:30: note: 2 statements (threshold 0)\n\n#define macro() {int x; {int y; {int z;}}}\n\nvoid baz0() { // 1\n  // CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'baz0' exceeds recommended size/complexity\n  // CHECK-MESSAGES: :[[@LINE-2]]:6: note: 28 lines including whitespace and comments (threshold 0)\n  // CHECK-MESSAGES: :[[@LINE-3]]:6: note: 9 statements (threshold 0)\n  int a;\n  { // 2\n    int b;\n    { // 3\n// CHECK-MESSAGES: :[[@LINE-1]]:5: note: nesting level 3 starts here (threshold 2)\n      int c;\n      { // 4\n        int d;\n      }\n    }\n  }\n  { // 2\n    int e;\n  }\n  { // 2\n    { // 3\n// CHECK-MESSAGES: :[[@LINE-1]]:5: note: nesting level 3 starts here (threshold 2)\n      int j;\n    }\n  }\n  macro()\n  // CHECK-MESSAGES: :[[@LINE-1]]:3: note: nesting level 3 starts here (threshold 2)\n  // CHECK-MESSAGES: :[[@LINE-28]]:25: note: expanded from macro 'macro'\n  // CHECK-MESSAGES: :[[@LINE-27]]:6: note: 9 variables (threshold 1)\n}\n\n// check that nested if's are not reported. this was broken initially\nvoid nesting_if() { // 1\n  // CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'nesting_if' exceeds recommended size/complexity\n  // CHECK-MESSAGES: :[[@LINE-2]]:6: note: 25 lines including whitespace and comments (threshold 0)\n  // CHECK-MESSAGES: :[[@LINE-3]]:6: note: 18 statements (threshold 0)\n  // CHECK-MESSAGES: :[[@LINE-4]]:6: note: 6 branches (threshold 0)\n  // CHECK-MESSAGES-OPTIONAL: :[[@LINE-5]]:6: warning: function 'nesting_if' exceeds recommended size/complexity\n  // CHECK-MESSAGES-OPTIONAL: :[[@LINE-6]]:6: note: 6 branches (threshold 5)\n  if (true) { // 2\n     int j;\n  } else if (true) { // 2\n     int j;\n     if (true) { // 3\n       // CHECK-MESSAGES: :[[@LINE-1]]:16: note: nesting level 3 starts here (threshold 2)\n       int j;\n     }\n  } else if (true) { // 2\n     int j;\n     if (true) { // 3\n       // CHECK-MESSAGES: :[[@LINE-1]]:16: note: nesting level 3 starts here (threshold 2)\n       int j;\n     }\n  } else if (true) { // 2\n     int j;\n  }\n  // CHECK-MESSAGES: :[[@LINE-24]]:6: note: 6 variables (threshold 1)\n}\n\n// however this should warn\nvoid bad_if_nesting() { // 1\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: function 'bad_if_nesting' exceeds recommended size/complexity\n// CHECK-MESSAGES: :[[@LINE-2]]:6: note: 23 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-3]]:6: note: 12 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 4 branches (threshold 0)\n  if (true) {    // 2\n    int j;\n  } else { // 2\n    if (true) { // 3\n      // CHECK-MESSAGES: :[[@LINE-1]]:15: note: nesting level 3 starts here (threshold 2)\n      int j;\n    } else { // 3\n      // CHECK-MESSAGES: :[[@LINE-1]]:12: note: nesting level 3 starts here (threshold 2)\n      if (true) { // 4\n        int j;\n      } else { // 4\n        if (true) { // 5\n          int j;\n        }\n      }\n    }\n  }\n  // CHECK-MESSAGES: :[[@LINE-22]]:6: note: 4 variables (threshold 1)\n}\n\nvoid variables_0() {\n  int i;\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'variables_0' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 statements (threshold 0)\nvoid variables_1(int i) {\n  int j;\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'variables_1' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 statements (threshold 0)\nvoid variables_2(int i, int j) {\n  ;\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'variables_2' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 statements (threshold 0)\nvoid variables_3() {\n  int i[2];\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'variables_3' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 statements (threshold 0)\nvoid variables_4() {\n  int i;\n  int j;\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'variables_4' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 2 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 2 variables (threshold 1)\nvoid variables_5() {\n  int i, j;\n}\n// CHECK-MESSAGES: :[[@LINE-3]]:6: warning: function 'variables_5' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:6: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 1 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 2 variables (threshold 1)\nvoid variables_6() {\n  for (int i;;)\n    for (int j;;)\n      ;\n}\n// CHECK-MESSAGES: :[[@LINE-5]]:6: warning: function 'variables_6' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 4 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 5 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 2 branches (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 2 variables (threshold 1)\nvoid variables_7() {\n  if (int a = 1)\n    if (int b = 2)\n      ;\n}\n// CHECK-MESSAGES: :[[@LINE-5]]:6: warning: function 'variables_7' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 4 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 7 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 2 branches (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 2 variables (threshold 1)\nvoid variables_8() {\n  int a[2];\n  for (auto i : a)\n    for (auto j : a)\n      ;\n}\n// CHECK-MESSAGES: :[[@LINE-6]]:6: warning: function 'variables_8' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 5 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 8 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 2 branches (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-10]]:6: note: 3 variables (threshold 1)\nvoid variables_9() {\n  int a, b;\n  struct A {\n    A(int c, int d) {\n      int e, f;\n    }\n  };\n}\n// CHECK-MESSAGES: :[[@LINE-8]]:6: warning: function 'variables_9' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 7 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-10]]:6: note: 3 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-11]]:6: note: 2 variables (threshold 1)\n// CHECK-MESSAGES: :[[@LINE-9]]:5: warning: function 'A' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-10]]:5: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-11]]:5: note: 1 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-12]]:5: note: 2 variables (threshold 1)\nvoid variables_10() {\n  int a, b;\n  struct A {\n    int c;\n    int d;\n  };\n}\n// CHECK-MESSAGES: :[[@LINE-7]]:6: warning: function 'variables_10' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 6 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 2 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-10]]:6: note: 2 variables (threshold 1)\nvoid variables_11() {\n  struct S {\n    void bar() {\n      int a, b;\n    }\n  };\n}\n// CHECK-MESSAGES: :[[@LINE-7]]:6: warning: function 'variables_11' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 6 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:10: warning: function 'bar' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-8]]:10: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:10: note: 2 variables (threshold 1)\nvoid variables_12() {\n  int v;\n  auto test = [](int a, int b) -> void {};\n  test({}, {});\n}\n// CHECK-MESSAGES: :[[@LINE-5]]:6: warning: function 'variables_12' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 4 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 3 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-8]]:6: note: 2 variables (threshold 1)\nvoid variables_13() {\n  int v;\n  auto test = []() -> void {\n    int a;\n    int b;\n  };\n  test();\n}\n// CHECK-MESSAGES: :[[@LINE-8]]:6: warning: function 'variables_13' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-9]]:6: note: 7 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-10]]:6: note: 5 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-11]]:6: note: 2 variables (threshold 1)\nvoid variables_14() {\n  (void)({int a = 12; a; });\n  (void)({int a = 12; a; });\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'variables_14' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 6 statements (threshold 0)\n#define SWAP(x, y) ({__typeof__(x) temp = x; x = y; y = temp; })\nvoid variables_15() {\n  int a = 10, b = 12;\n  SWAP(a, b);\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'variables_15' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 5 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 2 variables (threshold 1)\n#define vardecl(type, name) type name;\nvoid variables_16() {\n  vardecl(int, a);\n  vardecl(int, b);\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'variables_16' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 4 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 2 variables (threshold 1)\n\nstruct A {\n  A(int c, int d) : a(0), b(c) { ; }\n  int a;\n  int b;\n};\n// CHECK-MESSAGES: :[[@LINE-4]]:3: warning: function 'A' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:3: note: 3 statements (threshold 0)\n\nstruct B {\n  B(int x, int y, int z) : a(x + y * z), b(), c_a(y, z) {\n    ;\n  }\n  int a;\n  int b;\n  A c_a;\n};\n// CHECK-MESSAGES: :[[@LINE-7]]:3: warning: function 'B' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-8]]:3: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-9]]:3: note: 4 statements (threshold 0)\n\nstruct C : A, B {\n  C() : A(0, 4), B(1, 2, 3) {}\n};\n// CHECK-MESSAGES: :[[@LINE-2]]:3: warning: function 'C' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-3]]:3: note: 2 statements (threshold 0)\n\ntemplate<typename T>\nstruct TemplateC {\n  // 0 statements\n  TemplateC() : a(3) {}\n  T a;\n};\n// CHECK-MESSAGES: :[[@LINE-3]]:3: warning: function 'TemplateC<T>' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-4]]:3: note: 1 statements (threshold 0)\n\ntemplate<typename T>\nstruct TemplateD {\n  template<typename U>\n  TemplateD(U&& val) : member(val) { \n    ;\n  }\n  \n  T member;\n};\n// CHECK-MESSAGES: :[[@LINE-6]]:3: warning: function 'TemplateD<T>' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-7]]:3: note: 2 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-8]]:3: note: 2 statements (threshold 0)\n\nvoid instantiate() {\n  TemplateC<int> c;\n  TemplateD<int> d(5);\n}\n// CHECK-MESSAGES: :[[@LINE-4]]:6: warning: function 'instantiate' exceeds recommended size/complexity thresholds [readability-function-size]\n// CHECK-MESSAGES: :[[@LINE-5]]:6: note: 3 lines including whitespace and comments (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-6]]:6: note: 2 statements (threshold 0)\n// CHECK-MESSAGES: :[[@LINE-7]]:6: note: 2 variables (threshold 1)"
    }
  ]
}