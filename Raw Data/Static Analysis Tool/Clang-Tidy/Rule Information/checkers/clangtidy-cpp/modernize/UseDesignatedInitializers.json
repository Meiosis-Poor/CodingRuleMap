{
  "name": "UseDesignatedInitializers",
  "language": "cpp",
  "description": ".. title:: clang-tidy - modernize-use-designated-initializers",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "cpp",
  "loc": 205,
  "branches": 18,
  "apis": 116,
  "test": [
    {
      "description": null,
      "expected-problems": 56,
      "expected-linenumbers": [
        26,
        27,
        28,
        29,
        33,
        34,
        35,
        36,
        42,
        43,
        53,
        54,
        55,
        56,
        60,
        61,
        62,
        63,
        64,
        65,
        69,
        70,
        71,
        72,
        73,
        74,
        83,
        84,
        88,
        89,
        110,
        111,
        112,
        113,
        124,
        125,
        138,
        139,
        145,
        152,
        153,
        157,
        161,
        170,
        171,
        172,
        173,
        185,
        186,
        187,
        188,
        195,
        196,
        201,
        202,
        203
      ],
      "code": "\n// RUN: %check_clang_tidy -std=c++20 %s modernize-use-designated-initializers %t \\\n// RUN:     -- \\\n// RUN:     -- -fno-delayed-template-parsing\n// RUN: %check_clang_tidy -check-suffixes=,SINGLE-ELEMENT -std=c++20 %s modernize-use-designated-initializers %t \\\n// RUN:     -- -config=\"{CheckOptions: {modernize-use-designated-initializers.IgnoreSingleElementAggregates: false}}\" \\\n// RUN:     -- -fno-delayed-template-parsing\n// RUN: %check_clang_tidy -check-suffixes=POD -std=c++20 %s modernize-use-designated-initializers %t \\\n// RUN:     -- -config=\"{CheckOptions: {modernize-use-designated-initializers.RestrictToPODTypes: true}}\" \\\n// RUN:     -- -fno-delayed-template-parsing\n// RUN: %check_clang_tidy -check-suffixes=,MACROS -std=c++20 %s modernize-use-designated-initializers %t \\\n// RUN:     -- -config=\"{CheckOptions: {modernize-use-designated-initializers.IgnoreMacros: false}}\" \\\n// RUN:     -- -fno-delayed-template-parsing\n\nstruct S1 {};\n\nS1 s11{};\nS1 s12 = {};\nS1 s13();\nS1 s14;\n\nstruct S2 { int i, j; };\n\nS2 s21{.i=1, .j =2};\n\nS2 s22 = {1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-6]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:10: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-8]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S2 s22 = {.i=1, .j=2};\n\nS2 s23{1};\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-13]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:7: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-15]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S2 s23{.i=1};\n\nS2 s24{.i = 1};\n\nS2 s25 = {.i=1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:17: warning: use designated init expression to initialize field 'j' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-2]]:17: warning: use designated init expression to initialize field 'j' [modernize-use-designated-initializers]\n// CHECK-FIXES: S2 s25 = {.i=1, .j=2};\n\nclass S3 {\n  public:\n    S2 s2;\n    double d;\n};\n\nS3 s31 = {.s2 = 1, 2, 3.1};\n// CHECK-MESSAGES: :[[@LINE-1]]:20: warning: use designated init expression to initialize field 's2.j' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-2]]:23: warning: use designated init expression to initialize field 'd' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:20: warning: use designated init expression to initialize field 's2.j' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-4]]:23: warning: use designated init expression to initialize field 'd' [modernize-use-designated-initializers]\n// CHECK-FIXES: S3 s31 = {.s2 = 1, .s2.j=2, .d=3.1};\n\nS3 s32 = {{.i = 1, 2}};\n// CHECK-MESSAGES: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S3' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-15]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES: :[[@LINE-3]]:20: warning: use designated init expression to initialize field 'j' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-4]]:10: warning: use designated initializer list to initialize 'S3' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-18]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-6]]:20: warning: use designated init expression to initialize field 'j' [modernize-use-designated-initializers]\n// CHECK-FIXES: S3 s32 = {.s2={.i = 1, .j=2}};\n\nS3 s33 = {{2}, .d=3.1};\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: use designated init expression to initialize field 's2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-2]]:11: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-50]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-4]]:11: warning: use designated init expression to initialize field 's2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-5]]:11: warning: use designated initializer list to initialize 'S2' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-53]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S3 s33 = {.s2={.i=2}, .d=3.1};\n\nstruct S4 {\n    double d;\n    private: static int i;\n};\n\nS4 s41 {2.2};\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-1]]:8: warning: use designated initializer list to initialize 'S4' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-7]]:1: note: aggregate type is defined here\n// CHECK-FIXES-SINGLE-ELEMENT: S4 s41 {.d=2.2};\n\nS4 s42 = {{}};\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S4' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-12]]:1: note: aggregate type is defined here\n// CHECK-FIXES-SINGLE-ELEMENT: S4 s42 = {.d={}};\n\ntemplate<typename S> S template1() { return {10, 11}; }\n\nS2 s26 = template1<S2>();\n\ntemplate<typename S> S template2() { return {}; }\n\nS2 s27 = template2<S2>();\n\nstruct S5: S2 { int x, y; };\n\nS5 s51 {1, 2, .x = 3, .y = 4};\n\nstruct S6 {\n    int i;\n    struct { int j; } s;\n};\n\nS6 s61 {1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:8: warning: use designated initializer list to initialize 'S6' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-7]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:8: warning: use designated initializer list to initialize 'S6' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-9]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S6 s61 {.i=1, .s.j=2};\n\nstruct S7 {\n    union {\n        int k;\n        double d;\n    } u;\n};\n\nS7 s71 {1};\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-1]]:8: warning: use designated initializer list to initialize 'S7' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-SINGLE-ELEMENT: :[[@LINE-9]]:1: note: aggregate type is defined here\n// CHECK-FIXES-SINGLE-ELEMENT: S7 s71 {.u.k=1};\n\nstruct S8: S7 { int i; };\n\nS8 s81{1, 2};\n\nstruct S9 {\n    int i, j;\n    S9 &operator=(S9);\n};\n\nS9 s91{1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: use designated initializer list to initialize 'S9' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-7]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S9 s91{.i=1, .j=2};\n\nstruct S10 { int i = 1, j = 2; };\n\nS10 s101 {1, .j=2};\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: use designated init expression to initialize field 'i' [modernize-use-designated-initializers]\n// CHECK-FIXES: S10 s101 {.i=1, .j=2};\n\nstruct S11 { int i; S10 s10; };\n\nS11 s111 { .i = 1 };\nS11 s112 { 1 };\n// CHECK-MESSAGES: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S11' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-5]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S11 s112 { .i=1 };\n\nS11 s113 { .i=1, {}};\n// CHECK-MESSAGES: :[[@LINE-1]]:18: warning: use designated init expression to initialize field 's10' [modernize-use-designated-initializers]\n// CHECK-FIXES: S11 s113 { .i=1, .s10={}};\n\nS11 s114 { .i=1, .s10={1, .j=2}};\n// CHECK-MESSAGES: :[[@LINE-1]]:24: warning: use designated init expression to initialize field 'i' [modernize-use-designated-initializers]\n// CHECK-FIXES: S11 s114 { .i=1, .s10={.i=1, .j=2}};\n\nstruct S12 {\n    int i;\n    struct { int j; };\n};\n\nS12 s121 {1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S12' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-7]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:10: warning: use designated initializer list to initialize 'S12' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-9]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S12 s121 {.i=1, .j=2};\n\nstruct S13 {\n    union {\n        int k;\n        double d;\n    };\n    int i;\n};\n\nS13 s131 {1, 2};\n// CHECK-MESSAGES: :[[@LINE-1]]:10: warning: use designated initializer list to initialize 'S13' [modernize-use-designated-initializers]\n// CHECK-MESSAGES: :[[@LINE-10]]:1: note: aggregate type is defined here\n// CHECK-MESSAGES-POD: :[[@LINE-3]]:10: warning: use designated initializer list to initialize 'S13' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-POD: :[[@LINE-12]]:1: note: aggregate type is defined here\n// CHECK-FIXES: S13 s131 {.k=1, .i=2};\n\n#define A (3+2)\n#define B .j=1\n\nS9 s92 {A, B};\n// CHECK-MESSAGES-MACROS: :[[@LINE-1]]:9: warning: use designated init expression to initialize field 'i' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-MACROS: :[[@LINE-5]]:11: note: expanded from macro 'A'\n\n#define DECLARE_S93 S9 s93 {1, 2}\n\nDECLARE_S93;\n// CHECK-MESSAGES-MACROS: :[[@LINE-1]]:1: warning: use designated initializer list to initialize 'S9' [modernize-use-designated-initializers]\n// CHECK-MESSAGES-MACROS: :[[@LINE-4]]:28: note: expanded from macro 'DECLARE_S93'\n// CHECK-MESSAGES-MACROS: :[[@LINE-71]]:1: note: aggregate type is defined here\n\n// Issue #113652.\nstruct S14;\n\nstruct S15{\n  S15(S14& d):d{d}{}\n  S14& d;\n};\n\n//Issue #133715\nnamespace std {\n  template<typename T, unsigned int N>\n  struct array {\n    T __elems[N];\n  };\n    template<typename T, typename... U>\n    array(T, U...) -> array<T, 1 + sizeof...(U)>;\n}\n\nstd::array a{1,2,3};\nstd::array<int,2> b{10, 11};\nusing array = std::array<int, 2>;\narray c{10, 11};"
    }
  ]
}