{
  "name": "ConcatNestedNamespaces",
  "language": "cpp",
  "description": ".. title:: clang-tidy - modernize-concat-nested-namespaces",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "cpp",
  "loc": 193,
  "branches": 29,
  "apis": 152,
  "test": [
    {
      "description": null,
      "expected-problems": 18,
      "expected-linenumbers": [
        10,
        39,
        48,
        72,
        95,
        107,
        117,
        123,
        137,
        148,
        158,
        171,
        192,
        201,
        212,
        223,
        232,
        246
      ],
      "code": "\n// RUN: cp %S/Inputs/concat-nested-namespaces/modernize-concat-nested-namespaces.h %T/modernize-concat-nested-namespaces.h\n// RUN: %check_clang_tidy --match-partial-fixes -std=c++17 -check-suffix=NORMAL %s modernize-concat-nested-namespaces %t -- -header-filter=\".*\" -- -I %T\n// RUN: FileCheck -input-file=%T/modernize-concat-nested-namespaces.h %S/Inputs/concat-nested-namespaces/modernize-concat-nested-namespaces.h -check-prefix=CHECK-FIXES\n// Restore header file and re-run with c++20:\n// RUN: cp %S/Inputs/concat-nested-namespaces/modernize-concat-nested-namespaces.h %T/modernize-concat-nested-namespaces.h\n// RUN: %check_clang_tidy --match-partial-fixes -std=c++20 -check-suffixes=NORMAL,CPP20 %s modernize-concat-nested-namespaces %t -- -header-filter=\".*\" -- -I %T\n// RUN: FileCheck -input-file=%T/modernize-concat-nested-namespaces.h %S/Inputs/concat-nested-namespaces/modernize-concat-nested-namespaces.h -check-prefix=CHECK-FIXES\n\n#include \"modernize-concat-nested-namespaces.h\"\n// CHECK-MESSAGES-NORMAL-DAG: modernize-concat-nested-namespaces.h:1:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n\nnamespace n1 {}\n\nnamespace n2 {\nnamespace n3 {\nvoid t();\n}\nnamespace n4 {\nvoid t();\n}\n} // namespace n2\n\nnamespace n6 {\nnamespace [[deprecated]] attr_ns {\nvoid t();\n} // namespace attr_ns\n} // namespace n6\n\nnamespace n7 {\nvoid t();\n\nnamespace n8 {\nvoid t();\n}\n} // namespace n7\n\nnamespace n9 {\nnamespace n10 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n9::n10\nvoid t();\n} // namespace n10\n} // namespace n9\n// CHECK-FIXES-NORMAL: }\n\nnamespace n11 {\nnamespace n12 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n11::n12\nnamespace n13 {\nvoid t();\n}\nnamespace n14 {\nvoid t();\n}\n} // namespace n12\n} // namespace n11\n// CHECK-FIXES-NORMAL: }\n\nnamespace n15 {\nnamespace n16 {\nvoid t();\n}\n\ninline namespace n17 {\nvoid t();\n}\n\nnamespace n18 {\nnamespace n19 {\nnamespace n20 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-3]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n18::n19::n20\nvoid t();\n} // namespace n20\n} // namespace n19\n} // namespace n18\n// CHECK-FIXES-NORMAL: }\n\nnamespace n21 {\nvoid t();\n}\n} // namespace n15\n\nnamespace n22 {\nnamespace {\nvoid t();\n}\n} // namespace n22\n\nnamespace n23 {\nnamespace {\nnamespace n24 {\nnamespace n25 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n24::n25\nvoid t();\n} // namespace n25\n} // namespace n24\n// CHECK-FIXES-NORMAL: }\n} // namespace\n} // namespace n23\n\nnamespace n26::n27 {\nnamespace n28 {\nnamespace n29::n30 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-3]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n26::n27::n28::n29::n30 {\nvoid t() {}\n} // namespace n29::n30\n} // namespace n28\n} // namespace n26::n27\n// CHECK-FIXES-NORMAL: }\n\nnamespace n31 {\nnamespace n32 {}\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n} // namespace n31\n\nnamespace n33 {\nnamespace n34 {\nnamespace n35 {}\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n} // namespace n34\nnamespace n36 {\nvoid t();\n}\n} // namespace n33\n\nnamespace n37::n38 {\nvoid t();\n}\n\n#define IEXIST\nnamespace n39 {\nnamespace n40 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n39::n40\n#ifdef IEXIST\nvoid t() {}\n#endif\n} // namespace n40\n} // namespace n39\n// CHECK-FIXES-NORMAL: } // namespace n39::n40\n\nnamespace n41 {\nnamespace n42 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE-2]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\n// CHECK-FIXES-NORMAL: namespace n41::n42\n#ifdef IDONTEXIST\nvoid t() {}\n#endif\n} // namespace n42\n} // namespace n41\n// CHECK-FIXES-NORMAL: } // namespace n41::n42\n\n\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace n43 {\n#define N43_INNER\nnamespace n44 {\nvoid foo() {}\n} // namespace n44\n#undef N43_INNER\n} // namespace n43\n// CHECK-FIXES-NORMAL: #define N43_INNER\n// CHECK-FIXES-NORMAL: namespace n43::n44 {\n// CHECK-FIXES-NORMAL: } // namespace n43::n44\n// CHECK-FIXES-NORMAL: #undef N43_INNER\n\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace n45{\n#define N45_INNER\nnamespace n46\n{\n#pragma clang diagnostic push\nnamespace n47 {\nvoid foo() {}\n} // namespace n47\n#pragma clang diagnostic pop\n} // namespace n46\n#undef N45_INNER\n} // namespace n45\n// CHECK-FIXES-NORMAL: #define N45_INNER\n// CHECK-FIXES-NORMAL: #pragma clang diagnostic push\n// CHECK-FIXES-NORMAL: namespace n45::n46::n47 {\n// CHECK-FIXES-NORMAL: } // namespace n45::n46::n47\n// CHECK-FIXES-NORMAL: #pragma clang diagnostic pop\n// CHECK-FIXES-NORMAL: #undef N45_INNER\n\ninline namespace n48 {\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace n49 {\nnamespace n50 {\n// CHECK-FIXES-NORMAL: namespace n49::n50 {\nvoid foo() {}\n}\n}\n}\n\n// CHECK-MESSAGES-CPP20-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace n51 {\ninline namespace n52 {\nnamespace n53 {\n// CHECK-FIXES-CPP20: namespace n51::inline n52::n53 {\nvoid foo() {}\n}\n}\n}\n\n#if __cplusplus >= 202002L\n// CHECK-MESSAGES-CPP20-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace n54 {\nnamespace n55::inline n56::n57 {\nnamespace n58 {\n// CHECK-FIXES-CPP20: namespace n54::n55::inline n56::n57::n58 {\nvoid foo() {}\n}\n}\n}\n#endif\n\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace avoid_add_close_comment {\nnamespace inner {\nvoid foo() {}\n}\n}\n// CHECK-FIXES-NORMAL: namespace avoid_add_close_comment::inner {\n// CHECK-FIXES-NORMAL-NOT: } // namespace avoid_add_close_comment::inner\n\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace avoid_change_close_comment {\nnamespace inner {\nvoid foo() {}\n} // namespace inner and other comments\n} // namespace avoid_change_close_comment and other comments\n// CHECK-FIXES-NORMAL: namespace avoid_change_close_comment::inner {\n// CHECK-FIXES-NORMAL-NOT: } // namespace avoid_add_close_comment::inner\n\nnamespace /*::*/ comment_colon_1 {\nvoid foo() {}\n} // namespace comment_colon_1\n// CHECK-FIXES-NORMAL: namespace /*::*/ comment_colon_1 {\n\n// CHECK-MESSAGES-NORMAL-DAG: :[[@LINE+1]]:1: warning: nested namespaces can be concatenated [modernize-concat-nested-namespaces]\nnamespace /*::*/ comment_colon_2 {\nnamespace comment_colon_2 {\nvoid foo() {}\n} // namespace comment_colon_2\n} // namespace comment_colon_2\n\nint main() {\n  n26::n27::n28::n29::n30::t();\n#ifdef IEXIST\n  n39::n40::t();\n#endif\n\n#ifdef IDONTEXIST\n  n41::n42::t();\n#endif\n\n  return 0;\n}"
    }
  ]
}