{
  "name": "ReservedIdentifier",
  "language": "cpp",
  "description": ".. title:: clang-tidy - bugprone-reserved-identifier",
  "example": null,
  "cwe": null,
  "cwe-description": null,
  "checker-language": "cpp",
  "loc": 206,
  "branches": 21,
  "apis": 118,
  "test": [
    {
      "description": null,
      "expected-problems": 36,
      "expected-linenumbers": [
        10,
        14,
        18,
        21,
        26,
        30,
        34,
        38,
        47,
        51,
        54,
        57,
        62,
        66,
        70,
        74,
        83,
        87,
        90,
        93,
        98,
        102,
        106,
        110,
        123,
        129,
        135,
        138,
        141,
        147,
        152,
        156,
        159,
        163,
        167,
        171
      ],
      "code": "\n// RUN: %check_clang_tidy %s bugprone-reserved-identifier %t -- -- \\\n// RUN:   -I%S/Inputs/reserved-identifier \\\n// RUN:   -isystem %S/Inputs/reserved-identifier/system\n\n// no warnings expected without -header-filter=\n#include \"user-header.h\"\n#include <system-header.h>\n\n#define _MACRO(m) int m = 0\n// CHECK-MESSAGES: :[[@LINE-1]]:9: warning: declaration uses identifier '_MACRO', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: #define MACRO(m) int m = 0\n\nnamespace _Ns {\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: declaration uses identifier '_Ns', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: namespace Ns {\n\nclass _Object {\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_Object', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: class Object {\n  int _Member;\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_Member', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: int Member;\n};\n\nfloat _Global;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_Global', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: float Global;\n\nvoid _Function() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '_Function', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: void Function() {}\n\nusing _Alias = int;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_Alias', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: using Alias = int;\n\ntemplate <typename _TemplateParam>\n// CHECK-MESSAGES: :[[@LINE-1]]:20: warning: declaration uses identifier '_TemplateParam', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: template <typename TemplateParam>\nstruct S {};\n\n} // namespace _Ns\n\n//\n\n#define __macro(m) int m = 0\n// CHECK-MESSAGES: :[[@LINE-1]]:9: warning: declaration uses identifier '__macro', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: #define _macro(m) int m = 0\n\nnamespace __ns {\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: declaration uses identifier '__ns', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: namespace ns {\nclass __object {\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '__object', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: class _object {\n  int __member;\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '__member', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: int _member;\n};\n\nfloat __global;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '__global', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: float _global;\n\nvoid __function() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '__function', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: void _function() {}\n\nusing __alias = int;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '__alias', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: using _alias = int;\n\ntemplate <typename __templateParam>\n// CHECK-MESSAGES: :[[@LINE-1]]:20: warning: declaration uses identifier '__templateParam', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: template <typename _templateParam>\nstruct S {};\n\n} // namespace __ns\n\n//\n\n#define macro___m(m) int m = 0\n// CHECK-MESSAGES: :[[@LINE-1]]:9: warning: declaration uses identifier 'macro___m', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: #define macro_m(m) int m = 0\n\nnamespace ns___n {\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: declaration uses identifier 'ns___n', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: namespace ns_n {\nclass object___o {\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier 'object___o', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: class object_o {\n  int member___m;\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier 'member___m', which is a reserved identifier [bugprone-reserved-identifier]\n  // CHECK-FIXES: int member_m;\n};\n\nfloat global___g;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier 'global___g', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: float global_g;\n\nvoid function___f() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier 'function___f', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: void function_f() {}\n\nusing alias___a = int;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier 'alias___a', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: using alias_a = int;\n\ntemplate <typename templateParam___t>\n// CHECK-MESSAGES: :[[@LINE-1]]:20: warning: declaration uses identifier 'templateParam___t', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: template <typename templateParam_t>\nstruct S {};\n\n} // namespace ns___n\n\n//\n\n// OK, this rule does not apply to macros:\n// https://github.com/llvm/llvm-project/issues/64130#issuecomment-1655751676\n#define _macro(m) int m = 0\n\nnamespace _ns {\n// CHECK-MESSAGES: :[[@LINE-1]]:11: warning: declaration uses identifier '_ns', which is reserved in the global namespace [bugprone-reserved-identifier]\n// CHECK-FIXES: namespace ns {\nint _i;\n// no warning\n} // namespace _ns\nclass _object {\n  // CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_object', which is reserved in the global namespace [bugprone-reserved-identifier]\n  // CHECK-FIXES: class object {\n  int _member;\n  // no warning\n};\nfloat _global;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_global', which is reserved in the global namespace [bugprone-reserved-identifier]\n// CHECK-FIXES: float global;\nvoid _function() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '_function', which is reserved in the global namespace [bugprone-reserved-identifier]\n// CHECK-FIXES: void function() {}\nusing _alias = int;\n// CHECK-MESSAGES: :[[@LINE-1]]:7: warning: declaration uses identifier '_alias', which is reserved in the global namespace [bugprone-reserved-identifier]\n// CHECK-FIXES: using alias = int;\ntemplate <typename _templateParam> // no warning, template params are not in the global namespace\nstruct S {};\n\nvoid _float() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '_float', which is reserved in the global namespace; cannot be fixed because 'float' would conflict with a keyword [bugprone-reserved-identifier]\n// CHECK-FIXES: void _float() {}\n\n#define SOME_MACRO\nint SOME__MACRO;\n// CHECK-MESSAGES: :[[@LINE-1]]:5: warning: declaration uses identifier 'SOME__MACRO', which is a reserved identifier; cannot be fixed because 'SOME_MACRO' would conflict with a macro definition [bugprone-reserved-identifier]\n// CHECK-FIXES: int SOME__MACRO;\n\nvoid _TWO__PROBLEMS() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '_TWO__PROBLEMS', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: void TWO_PROBLEMS() {}\nvoid _two__problems() {}\n// CHECK-MESSAGES: :[[@LINE-1]]:6: warning: declaration uses identifier '_two__problems', which is a reserved identifier [bugprone-reserved-identifier]\n// CHECK-FIXES: void two_problems() {}\n\nint __;\n// CHECK-MESSAGES: :[[@LINE-1]]:5: warning: declaration uses identifier '__', which is a reserved identifier; cannot be fixed automatically [bugprone-reserved-identifier]\n// CHECK-FIXES: int __;\n\nint _________;\n// CHECK-MESSAGES: :[[@LINE-1]]:5: warning: declaration uses identifier '_________', which is a reserved identifier; cannot be fixed automatically [bugprone-reserved-identifier]\n// CHECK-FIXES: int _________;\n\nint _;\n// CHECK-MESSAGES: :[[@LINE-1]]:5: warning: declaration uses identifier '_', which is reserved in the global namespace; cannot be fixed automatically [bugprone-reserved-identifier]\n// CHECK-FIXES: int _;\n\n// This should not trigger a warning\n// https://github.com/llvm/llvm-project/issues/52895\n#define _5_kmph_rpm 459\n\n// these should pass\n#define MACRO(m) int m = 0\n\nnamespace Ns {\nclass Object {\n  int Member;\n};\nfloat Global;\n\nvoid Function() {}\nusing Alias = int;\ntemplate <typename TemplateParam>\nstruct S {};\n} // namespace Ns\nnamespace ns_ {\nclass object_ {\n  int member_;\n};\nfloat global_;\nvoid function_() {}\nusing alias_ = int;\ntemplate <typename templateParam_>\nstruct S {};\n} // namespace ns_\n\nclass object_ {\n  int member_;\n};\nfloat global_;\nvoid function_() {}\nusing alias_ = int;\ntemplate <typename templateParam_>\nstruct S_ {};"
    }
  ]
}